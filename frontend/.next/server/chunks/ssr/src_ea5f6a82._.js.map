{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/form.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 384, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/calendar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n"],"names":[],"mappings":";;;;AAGA;AAAA;AACA;AAEA;AACA;AAPA;;;;;;AAWA,SAAS,SAAS,EAChB,SAAS,EACT,UAAU,EACV,kBAAkB,IAAI,EACtB,GAAG,OACW;IACd,qBACE,8OAAC,8JAAA,CAAA,YAAS;QACR,iBAAiB;QACjB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,OAAO;QACrB,YAAY;YACV,QAAQ;YACR,OAAO;YACP,SAAS;YACT,eAAe;YACf,KAAK;YACL,YAAY,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACX,CAAA,GAAA,kIAAA,CAAA,iBAAc,AAAD,EAAE;gBAAE,SAAS;YAAU,IACpC;YAEF,qBAAqB;YACrB,iBAAiB;YACjB,OAAO;YACP,UAAU;YACV,WACE;YACF,KAAK;YACL,MAAM;YACN,KAAK,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACJ,CAAA,GAAA,kIAAA,CAAA,iBAAc,AAAD,EAAE;gBAAE,SAAS;YAAQ,IAClC;YAEF,eAAe;YACf,cACE;YACF,WAAW;YACX,aACE;YACF,cAAc;YACd,kBACE;YACF,YAAY;YACZ,GAAG,UAAU;QACf;QACA,YAAY;YACV,UAAU,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,iBAChC,8OAAC,oNAAA,CAAA,cAAW;oBAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;oBAAa,GAAG,KAAK;;;;;;YAE7D,WAAW,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,iBACjC,8OAAC,sNAAA,CAAA,eAAY;oBAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,WAAW;oBAAa,GAAG,KAAK;;;;;;QAEhE;QACC,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 464, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,UAAU,mKAAA,CAAA,OAAqB;AAErC,MAAM,iBAAiB,mKAAA,CAAA,UAAwB;AAE/C,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,8OAAC,mKAAA,CAAA,SAAuB;kBACtB,cAAA,8OAAC,mKAAA,CAAA,UAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,mKAAA,CAAA,UAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 505, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 533, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/invoices/signature-pad.tsx"],"sourcesContent":["'use client';\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Pen, Eraser } from 'lucide-react';\n\ninterface SignaturePadProps {\n  onSave: (dataUrl: string) => void;\n  width?: number;\n  height?: number;\n  initialDataUrl?: string;\n}\n\nexport default function SignaturePad({ onSave, width = 400, height = 200, initialDataUrl }: SignaturePadProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [hasSigned, setHasSigned] = useState(!!initialDataUrl);\n\n  const getContext = () => canvasRef.current?.getContext('2d');\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (canvas) {\n      const ratio = Math.max(window.devicePixelRatio || 1, 1);\n      canvas.width = width * ratio;\n      canvas.height = height * ratio;\n      canvas.style.width = `${width}px`;\n      canvas.style.height = `${height}px`;\n      \n      const context = getContext();\n      if (context) {\n        context.scale(ratio, ratio);\n        context.strokeStyle = '#333';\n        context.lineWidth = 2;\n        context.lineCap = 'round';\n        context.lineJoin = 'round';\n\n        if (initialDataUrl) {\n            const image = new Image();\n            image.onload = () => {\n                context.drawImage(image, 0, 0);\n            };\n            image.src = initialDataUrl;\n        }\n      }\n    }\n  }, [width, height, initialDataUrl]);\n\n  const getCoords = (event: MouseEvent | TouchEvent) => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const rect = canvas.getBoundingClientRect();\n    if (event instanceof MouseEvent) {\n      return { x: event.clientX - rect.left, y: event.clientY - rect.top };\n    }\n    if (event.touches[0]) {\n      return { x: event.touches[0].clientX - rect.left, y: event.touches[0].clientY - rect.top };\n    }\n  };\n\n  const startDrawing = (event: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    const coords = getCoords(event.nativeEvent);\n    if (coords) {\n      const context = getContext();\n      context?.beginPath();\n      context?.moveTo(coords.x, coords.y);\n      setIsDrawing(true);\n      setHasSigned(true);\n    }\n  };\n\n  const draw = (event: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    if (!isDrawing) return;\n    const coords = getCoords(event.nativeEvent);\n    if (coords) {\n      const context = getContext();\n      context?.lineTo(coords.x, coords.y);\n      context?.stroke();\n    }\n  };\n\n  const stopDrawing = () => {\n    const context = getContext();\n    context?.closePath();\n    setIsDrawing(false);\n  };\n\n  const handleClear = () => {\n    const context = getContext();\n    if (context && canvasRef.current) {\n      context.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n    }\n    onSave('');\n    setHasSigned(false);\n  };\n  \n  const handleSave = () => {\n    const canvas = canvasRef.current;\n    if (canvas && hasSigned) {\n      const dataUrl = canvas.toDataURL('image/png');\n      onSave(dataUrl);\n    } else {\n      onSave('');\n    }\n    // Maybe show a toast or visual confirmation\n  };\n\n  return (\n    <div className=\"flex flex-col gap-2 items-center\">\n      <canvas\n        ref={canvasRef}\n        onMouseDown={startDrawing}\n        onMouseMove={draw}\n        onMouseUp={stopDrawing}\n        onMouseLeave={stopDrawing}\n        onTouchStart={startDrawing}\n        onTouchMove={draw}\n        onTouchEnd={stopDrawing}\n        className=\"border rounded-md cursor-crosshair bg-gray-50\"\n      />\n      <div className=\"flex gap-2\">\n        <Button type=\"button\" variant=\"outline\" onClick={handleClear}>\n          <Eraser className=\"mr-2 h-4 w-4\" />\n          Clear\n        </Button>\n        <Button type=\"button\" onClick={handleSave} className=\"bg-primary hover:bg-primary/90\">\n           <Pen className=\"mr-2 h-4 w-4\" />\n           Confirm Signature\n        </Button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 717, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 798, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["'use server'\n\nimport { z } from 'zod'\nimport { generateFinancialInsights } from '@/ai/flows/generate-financial-insights'\nimport { generateInvoiceFromText } from '@/ai/flows/generate-invoice-from-text'\nimport { calculateTax } from '@/ai/flows/calculate-tax'\nimport { invoiceSchema, clientSchema } from '@/lib/types'\nimport { planLimits } from '@/lib/subscriptions';\nimport { cookies } from 'next/headers'\nimport { redirect } from 'next/navigation'\nimport { revalidatePath } from 'next/cache'\n\nconst API_BASE_URL = process.env.API_BASE_URL || 'http://localhost:8080/api';\n\nconst loginSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(1, 'Password is required')\n})\n\n// --- Helper function for API calls ---\nasync function apiFetch(url: string, options: RequestInit = {}) {\n  const sessionToken = cookies().get('session')?.value;\n  try {\n    const res = await fetch(`${API_BASE_URL}${url}`, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        ...(sessionToken && { 'Authorization': `Bearer ${sessionToken}` }),\n        ...options.headers,\n      },\n    });\n\n    if (!res.ok) {\n      const errorBody = await res.json().catch(() => ({ message: `Request failed with status ${res.status}` }));\n      // For 403 Forbidden, we want to show a specific message from the API\n      if (res.status === 403) {\n          throw new Error(errorBody.message || 'You do not have permission to perform this action. Please upgrade your plan.');\n      }\n      throw new Error(errorBody.message || 'An API error occurred');\n    }\n\n    if (res.status === 204) { // No Content\n        return null;\n    }\n\n    return await res.json();\n  } catch (error) {\n    console.error(`API Error fetching ${url}:`, error);\n    const message = error instanceof Error ? error.message : 'An unknown network error occurred';\n    throw new Error(message);\n  }\n}\n\n\nexport async function loginAction(data: z.infer<typeof loginSchema>) {\n  const parsedData = loginSchema.safeParse(data);\n  if (!parsedData.success) {\n      return { success: false, error: \"Invalid data provided.\"}\n  }\n\n  const { email, password } = parsedData.data;\n\n  // Mock authentication logic - in a real app, this would call a /login API endpoint\n  // that validates hashed passwords.\n  if (email === 'user@example.com' && password === 'password') {\n    // For this demo, we use the user's email as their session \"token\".\n    // This allows the backend to identify the user for each request.\n    cookies().set('session', email, {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      path: '/',\n      // Removed maxAge to make it a session cookie\n    })\n    return { success: true }\n  } else {\n    return { success: false, error: 'Invalid credentials.' }\n  }\n}\n\nexport async function logoutAction() {\n  cookies().delete('session')\n  redirect('/login')\n}\n\n// --- User Actions ---\nexport async function getUserAction() {\n  try {\n    const user = await apiFetch('/users/me');\n    return { success: true, data: user };\n  } catch (error) {\n    return { success: false, error: 'User not found.' };\n  }\n}\n\n\n// --- Invoice Actions ---\n\nexport async function getInvoicesAction(params?: { clientId?: string }) {\n  try {\n    const url = params?.clientId ? `/invoices?clientId=${params.clientId}` : '/invoices';\n    const invoices = await apiFetch(url);\n    return { success: true, data: invoices };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch invoices.' };\n  }\n}\n\nexport async function createInvoiceAction(data: z.infer<typeof invoiceSchema>) {\n  const parsedData = invoiceSchema.safeParse(data);\n  if (!parsedData.success) {\n    return { success: false, error: 'Invalid data provided.' };\n  }\n  \n  try {\n    const subtotal = parsedData.data.lineItems.reduce((sum, item) => sum + item.quantity * item.rate, 0);\n    const tax = parsedData.data.tax || 0;\n    const total = subtotal + tax;\n\n    const newInvoiceData = { ...parsedData.data, subtotal, tax, total };\n    \n    // The backend will now check the user's plan and invoice count before creating.\n    await apiFetch('/invoices', {\n      method: 'POST',\n      body: JSON.stringify(newInvoiceData),\n    });\n    \n    revalidatePath('/dashboard/invoices');\n    revalidatePath('/dashboard/payments');\n    revalidatePath('/dashboard/settings'); // To update usage display\n    return { success: true, message: 'Invoice created successfully!' };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to create invoice.' };\n  }\n}\n\nexport async function getInvoiceByIdAction(id: string) {\n  try {\n    const invoice = await apiFetch(`/invoices/${id}`);\n    return { success: true, data: invoice };\n  } catch (error) {\n    return { success: false, error: 'Invoice not found.' };\n  }\n}\n\nexport async function updateInvoiceAction(id: string, data: z.infer<typeof invoiceSchema>) {\n  const parsedData = invoiceSchema.safeParse(data);\n  if (!parsedData.success) {\n    return { success: false, error: 'Invalid data provided.' };\n  }\n\n  try {\n    const subtotal = parsedData.data.lineItems.reduce((sum, item) => sum + item.quantity * item.rate, 0);\n    const tax = parsedData.data.tax || 0;\n    const total = subtotal + tax;\n\n    const updatedInvoiceData = { ...parsedData.data, subtotal, tax, total };\n\n    await apiFetch(`/invoices/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(updatedInvoiceData),\n    });\n\n    revalidatePath('/dashboard/invoices');\n    revalidatePath(`/dashboard/invoices/${id}`);\n    revalidatePath(`/dashboard/invoices/${id}/edit`);\n    revalidatePath('/dashboard/payments');\n    return { success: true, message: `Invoice ${data.invoiceNumber} updated successfully!` };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to update invoice.' };\n  }\n}\n\nexport async function deleteInvoiceAction(id: string) {\n  try {\n    await apiFetch(`/invoices/${id}`, { method: 'DELETE' });\n    revalidatePath('/dashboard/invoices');\n    revalidatePath('/dashboard/payments');\n    return { success: true, message: 'Invoice deleted successfully!' };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to delete invoice.' };\n  }\n}\n\nexport async function updateInvoiceStatusAction(id: string, status: 'paid' | 'pending' | 'overdue') {\n  try {\n    await apiFetch(`/invoices/${id}/status`, {\n      method: 'PUT',\n      body: JSON.stringify({ status }),\n    });\n    revalidatePath('/dashboard/invoices');\n    revalidatePath(`/dashboard/invoices/${id}`);\n    revalidatePath('/dashboard'); // For the stats cards\n    revalidatePath('/dashboard/payments');\n    return { success: true, message: `Invoice status updated to ${status}.` };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to update invoice status.' };\n  }\n}\n\nexport async function sendInvoiceReminderAction(invoiceId: string) {\n  try {\n    const result = await apiFetch(`/invoices/${invoiceId}/remind`, { method: 'POST' });\n    return { success: true, message: result.message || 'Reminder sent successfully!' };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to send reminder.' };\n  }\n}\n\n// --- Client Actions ---\n\nexport async function getClientsAction() {\n    try {\n        const clients = await apiFetch('/clients');\n        return { success: true, data: clients };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch clients.' };\n    }\n}\n\nexport async function getClientByIdAction(id: string) {\n    try {\n        const client = await apiFetch(`/clients/${id}`);\n        return { success: true, data: client };\n    } catch (error) {\n        return { success: false, error: 'Client not found.' };\n    }\n}\n\nexport async function createClientAction(data: z.infer<typeof clientSchema>) {\n    const parsedData = clientSchema.safeParse(data);\n    if (!parsedData.success) {\n        return { success: false, error: \"Invalid data provided.\"}\n    }\n    try {\n        await apiFetch('/clients', {\n            method: 'POST',\n            body: JSON.stringify(parsedData.data),\n        });\n        revalidatePath('/dashboard/clients');\n        return { success: true, message: 'Client created successfully!' };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to create client.' };\n    }\n}\n\nexport async function updateClientAction(id: string, data: z.infer<typeof clientSchema>) {\n    const parsedData = clientSchema.safeParse(data);\n    if (!parsedData.success) {\n        return { success: false, error: 'Invalid data provided.'}\n    }\n    try {\n        await apiFetch(`/clients/${id}`, {\n            method: 'PUT',\n            body: JSON.stringify(parsedData.data),\n        });\n        revalidatePath('/dashboard/clients');\n        revalidatePath(`/dashboard/clients/${id}`);\n        revalidatePath(`/dashboard/clients/${id}/edit`);\n        return { success: true, message: `Client ${data.name} updated successfully!` };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to update client.' };\n    }\n}\n\nexport async function deleteClientAction(id: string) {\n    try {\n        await apiFetch(`/clients/${id}`, { method: 'DELETE' });\n        revalidatePath('/dashboard/clients');\n        return { success: true, message: 'Client deleted successfully!' };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to delete client.' };\n    }\n}\n\nconst noteFormSchema = z.object({\n  content: z.string().min(1, 'Note content cannot be empty.'),\n});\n\nexport async function addClientNoteAction(clientId: string, data: z.infer<typeof noteFormSchema>) {\n  const parsedData = noteFormSchema.safeParse(data);\n  if (!parsedData.success) {\n    return { success: false, error: 'Invalid data provided.' };\n  }\n  try {\n    const updatedClient = await apiFetch(`/clients/${clientId}/notes`, {\n      method: 'POST',\n      body: JSON.stringify(parsedData.data),\n    });\n    revalidatePath(`/dashboard/clients/${clientId}`);\n    return { success: true, message: 'Note added successfully!', data: updatedClient };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to add note.' };\n  }\n}\n\n// --- Payment Actions ---\n\nexport async function getPaymentsAction() {\n    try {\n        const payments = await apiFetch('/payments');\n        return { success: true, data: payments };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch payments.' };\n    }\n}\n\n// --- Stripe / Subscription Actions ---\nexport async function createPaymentIntentAction(amount: number, currency: string) {\n    try {\n        const result = await apiFetch('/stripe/create-payment-intent', {\n            method: 'POST',\n            body: JSON.stringify({ amount, currency }),\n        });\n        return { success: true, clientSecret: result.clientSecret };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to create payment intent.' };\n    }\n}\n\nexport async function confirmStripePaymentAction(invoiceId: string, paymentIntentId: string) {\n    try {\n        const updatedInvoice = await apiFetch(`/invoices/${invoiceId}/confirm-payment`, {\n            method: 'POST',\n            body: JSON.stringify({ paymentIntentId }),\n        });\n        revalidatePath(`/dashboard/invoices/${invoiceId}`);\n        revalidatePath('/dashboard/invoices');\n        revalidatePath('/dashboard/payments');\n        return { success: true, message: 'Payment confirmed successfully!', data: updatedInvoice };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to confirm payment.' };\n    }\n}\n\nexport async function createCheckoutSessionAction(priceId: string) {\n    try {\n        const result = await apiFetch('/subscriptions/create-checkout-session', {\n            method: 'POST',\n            body: JSON.stringify({ priceId }),\n        });\n        if (result.url) {\n            redirect(result.url);\n        } else {\n            return { success: false, error: 'Could not create checkout session.' };\n        }\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to create checkout session.' };\n    }\n}\n\nexport async function createPortalSessionAction() {\n    try {\n        const result = await apiFetch('/subscriptions/create-portal-session', {\n            method: 'POST'\n        });\n        if (result.url) {\n            redirect(result.url);\n        } else {\n            return { success: false, error: 'Could not create portal session.' };\n        }\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to create portal session.' };\n    }\n}\n\n\n// --- AI Actions ---\n\nasync function checkAiUsageLimit() {\n    const userResult = await getUserAction();\n    if (!userResult.success) {\n        throw new Error('Could not identify user. Please log in again.');\n    }\n    const user = userResult.data;\n    const limits = planLimits[user.plan as keyof typeof planLimits] || planLimits.free;\n\n    if (user.aiRequestCount >= limits.aiRequests) {\n        throw new Error(`You have reached your monthly limit of ${limits.aiRequests} AI requests. Please upgrade your plan.`);\n    }\n}\n\nasync function incrementAiUsage() {\n    try {\n        await apiFetch('/users/me/increment-ai', { method: 'PUT' });\n        revalidatePath('/dashboard/settings');\n    } catch (error) {\n        console.error(\"Failed to increment AI usage count:\", error);\n        // We don't throw here to not fail the main operation, but we log the error.\n    }\n}\n\nexport async function getFinancialInsightsAction() {\n  try {\n    await checkAiUsageLimit();\n\n    const [invoicesResult, paymentsResult] = await Promise.all([\n      getInvoicesAction(),\n      getPaymentsAction(),\n    ]);\n\n    if (!invoicesResult.success || !paymentsResult.success) {\n      throw new Error('Failed to fetch financial data for analysis.');\n    }\n\n    const insights = await generateFinancialInsights({\n      invoiceData: JSON.stringify(invoicesResult.data),\n      paymentData: JSON.stringify(paymentsResult.data),\n    });\n\n    await incrementAiUsage();\n    return { success: true, data: insights };\n  } catch (error) {\n    console.error('Error generating financial insights:', error);\n    const message = error instanceof Error ? error.message : 'Failed to generate financial insights.';\n    return { success: false, error: message };\n  }\n}\n\nexport async function generateInvoiceFromTextAction(text: string) {\n  try {\n    await checkAiUsageLimit();\n    const result = await generateInvoiceFromText(text);\n    await incrementAiUsage();\n    return { success: true, data: result };\n  } catch (error) {\n    console.error('Error generating invoice from text:', error);\n    const message = error instanceof Error ? error.message : 'Failed to generate invoice from text.';\n    return { success: false, error: message };\n  }\n}\n\nexport async function calculateTaxAction(address: string, subtotal: number) {\n  try {\n    await checkAiUsageLimit();\n    const result = await calculateTax({ address, subtotal });\n    await incrementAiUsage();\n    return { success: true, data: result };\n  } catch (error) {\n    console.error('Error calculating tax:', error);\n    const message = error instanceof Error ? error.message : 'Failed to calculate tax with AI.';\n    return { success: false, error: message };\n  }\n}\n"],"names":[],"mappings":";;;;;;IA2GsB,sBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 811, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["'use server'\n\nimport { z } from 'zod'\nimport { generateFinancialInsights } from '@/ai/flows/generate-financial-insights'\nimport { generateInvoiceFromText } from '@/ai/flows/generate-invoice-from-text'\nimport { calculateTax } from '@/ai/flows/calculate-tax'\nimport { invoiceSchema, clientSchema } from '@/lib/types'\nimport { planLimits } from '@/lib/subscriptions';\nimport { cookies } from 'next/headers'\nimport { redirect } from 'next/navigation'\nimport { revalidatePath } from 'next/cache'\n\nconst API_BASE_URL = process.env.API_BASE_URL || 'http://localhost:8080/api';\n\nconst loginSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(1, 'Password is required')\n})\n\n// --- Helper function for API calls ---\nasync function apiFetch(url: string, options: RequestInit = {}) {\n  const sessionToken = cookies().get('session')?.value;\n  try {\n    const res = await fetch(`${API_BASE_URL}${url}`, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        ...(sessionToken && { 'Authorization': `Bearer ${sessionToken}` }),\n        ...options.headers,\n      },\n    });\n\n    if (!res.ok) {\n      const errorBody = await res.json().catch(() => ({ message: `Request failed with status ${res.status}` }));\n      // For 403 Forbidden, we want to show a specific message from the API\n      if (res.status === 403) {\n          throw new Error(errorBody.message || 'You do not have permission to perform this action. Please upgrade your plan.');\n      }\n      throw new Error(errorBody.message || 'An API error occurred');\n    }\n\n    if (res.status === 204) { // No Content\n        return null;\n    }\n\n    return await res.json();\n  } catch (error) {\n    console.error(`API Error fetching ${url}:`, error);\n    const message = error instanceof Error ? error.message : 'An unknown network error occurred';\n    throw new Error(message);\n  }\n}\n\n\nexport async function loginAction(data: z.infer<typeof loginSchema>) {\n  const parsedData = loginSchema.safeParse(data);\n  if (!parsedData.success) {\n      return { success: false, error: \"Invalid data provided.\"}\n  }\n\n  const { email, password } = parsedData.data;\n\n  // Mock authentication logic - in a real app, this would call a /login API endpoint\n  // that validates hashed passwords.\n  if (email === 'user@example.com' && password === 'password') {\n    // For this demo, we use the user's email as their session \"token\".\n    // This allows the backend to identify the user for each request.\n    cookies().set('session', email, {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      path: '/',\n      // Removed maxAge to make it a session cookie\n    })\n    return { success: true }\n  } else {\n    return { success: false, error: 'Invalid credentials.' }\n  }\n}\n\nexport async function logoutAction() {\n  cookies().delete('session')\n  redirect('/login')\n}\n\n// --- User Actions ---\nexport async function getUserAction() {\n  try {\n    const user = await apiFetch('/users/me');\n    return { success: true, data: user };\n  } catch (error) {\n    return { success: false, error: 'User not found.' };\n  }\n}\n\n\n// --- Invoice Actions ---\n\nexport async function getInvoicesAction(params?: { clientId?: string }) {\n  try {\n    const url = params?.clientId ? `/invoices?clientId=${params.clientId}` : '/invoices';\n    const invoices = await apiFetch(url);\n    return { success: true, data: invoices };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch invoices.' };\n  }\n}\n\nexport async function createInvoiceAction(data: z.infer<typeof invoiceSchema>) {\n  const parsedData = invoiceSchema.safeParse(data);\n  if (!parsedData.success) {\n    return { success: false, error: 'Invalid data provided.' };\n  }\n  \n  try {\n    const subtotal = parsedData.data.lineItems.reduce((sum, item) => sum + item.quantity * item.rate, 0);\n    const tax = parsedData.data.tax || 0;\n    const total = subtotal + tax;\n\n    const newInvoiceData = { ...parsedData.data, subtotal, tax, total };\n    \n    // The backend will now check the user's plan and invoice count before creating.\n    await apiFetch('/invoices', {\n      method: 'POST',\n      body: JSON.stringify(newInvoiceData),\n    });\n    \n    revalidatePath('/dashboard/invoices');\n    revalidatePath('/dashboard/payments');\n    revalidatePath('/dashboard/settings'); // To update usage display\n    return { success: true, message: 'Invoice created successfully!' };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to create invoice.' };\n  }\n}\n\nexport async function getInvoiceByIdAction(id: string) {\n  try {\n    const invoice = await apiFetch(`/invoices/${id}`);\n    return { success: true, data: invoice };\n  } catch (error) {\n    return { success: false, error: 'Invoice not found.' };\n  }\n}\n\nexport async function updateInvoiceAction(id: string, data: z.infer<typeof invoiceSchema>) {\n  const parsedData = invoiceSchema.safeParse(data);\n  if (!parsedData.success) {\n    return { success: false, error: 'Invalid data provided.' };\n  }\n\n  try {\n    const subtotal = parsedData.data.lineItems.reduce((sum, item) => sum + item.quantity * item.rate, 0);\n    const tax = parsedData.data.tax || 0;\n    const total = subtotal + tax;\n\n    const updatedInvoiceData = { ...parsedData.data, subtotal, tax, total };\n\n    await apiFetch(`/invoices/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(updatedInvoiceData),\n    });\n\n    revalidatePath('/dashboard/invoices');\n    revalidatePath(`/dashboard/invoices/${id}`);\n    revalidatePath(`/dashboard/invoices/${id}/edit`);\n    revalidatePath('/dashboard/payments');\n    return { success: true, message: `Invoice ${data.invoiceNumber} updated successfully!` };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to update invoice.' };\n  }\n}\n\nexport async function deleteInvoiceAction(id: string) {\n  try {\n    await apiFetch(`/invoices/${id}`, { method: 'DELETE' });\n    revalidatePath('/dashboard/invoices');\n    revalidatePath('/dashboard/payments');\n    return { success: true, message: 'Invoice deleted successfully!' };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to delete invoice.' };\n  }\n}\n\nexport async function updateInvoiceStatusAction(id: string, status: 'paid' | 'pending' | 'overdue') {\n  try {\n    await apiFetch(`/invoices/${id}/status`, {\n      method: 'PUT',\n      body: JSON.stringify({ status }),\n    });\n    revalidatePath('/dashboard/invoices');\n    revalidatePath(`/dashboard/invoices/${id}`);\n    revalidatePath('/dashboard'); // For the stats cards\n    revalidatePath('/dashboard/payments');\n    return { success: true, message: `Invoice status updated to ${status}.` };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to update invoice status.' };\n  }\n}\n\nexport async function sendInvoiceReminderAction(invoiceId: string) {\n  try {\n    const result = await apiFetch(`/invoices/${invoiceId}/remind`, { method: 'POST' });\n    return { success: true, message: result.message || 'Reminder sent successfully!' };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to send reminder.' };\n  }\n}\n\n// --- Client Actions ---\n\nexport async function getClientsAction() {\n    try {\n        const clients = await apiFetch('/clients');\n        return { success: true, data: clients };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch clients.' };\n    }\n}\n\nexport async function getClientByIdAction(id: string) {\n    try {\n        const client = await apiFetch(`/clients/${id}`);\n        return { success: true, data: client };\n    } catch (error) {\n        return { success: false, error: 'Client not found.' };\n    }\n}\n\nexport async function createClientAction(data: z.infer<typeof clientSchema>) {\n    const parsedData = clientSchema.safeParse(data);\n    if (!parsedData.success) {\n        return { success: false, error: \"Invalid data provided.\"}\n    }\n    try {\n        await apiFetch('/clients', {\n            method: 'POST',\n            body: JSON.stringify(parsedData.data),\n        });\n        revalidatePath('/dashboard/clients');\n        return { success: true, message: 'Client created successfully!' };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to create client.' };\n    }\n}\n\nexport async function updateClientAction(id: string, data: z.infer<typeof clientSchema>) {\n    const parsedData = clientSchema.safeParse(data);\n    if (!parsedData.success) {\n        return { success: false, error: 'Invalid data provided.'}\n    }\n    try {\n        await apiFetch(`/clients/${id}`, {\n            method: 'PUT',\n            body: JSON.stringify(parsedData.data),\n        });\n        revalidatePath('/dashboard/clients');\n        revalidatePath(`/dashboard/clients/${id}`);\n        revalidatePath(`/dashboard/clients/${id}/edit`);\n        return { success: true, message: `Client ${data.name} updated successfully!` };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to update client.' };\n    }\n}\n\nexport async function deleteClientAction(id: string) {\n    try {\n        await apiFetch(`/clients/${id}`, { method: 'DELETE' });\n        revalidatePath('/dashboard/clients');\n        return { success: true, message: 'Client deleted successfully!' };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to delete client.' };\n    }\n}\n\nconst noteFormSchema = z.object({\n  content: z.string().min(1, 'Note content cannot be empty.'),\n});\n\nexport async function addClientNoteAction(clientId: string, data: z.infer<typeof noteFormSchema>) {\n  const parsedData = noteFormSchema.safeParse(data);\n  if (!parsedData.success) {\n    return { success: false, error: 'Invalid data provided.' };\n  }\n  try {\n    const updatedClient = await apiFetch(`/clients/${clientId}/notes`, {\n      method: 'POST',\n      body: JSON.stringify(parsedData.data),\n    });\n    revalidatePath(`/dashboard/clients/${clientId}`);\n    return { success: true, message: 'Note added successfully!', data: updatedClient };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to add note.' };\n  }\n}\n\n// --- Payment Actions ---\n\nexport async function getPaymentsAction() {\n    try {\n        const payments = await apiFetch('/payments');\n        return { success: true, data: payments };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch payments.' };\n    }\n}\n\n// --- Stripe / Subscription Actions ---\nexport async function createPaymentIntentAction(amount: number, currency: string) {\n    try {\n        const result = await apiFetch('/stripe/create-payment-intent', {\n            method: 'POST',\n            body: JSON.stringify({ amount, currency }),\n        });\n        return { success: true, clientSecret: result.clientSecret };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to create payment intent.' };\n    }\n}\n\nexport async function confirmStripePaymentAction(invoiceId: string, paymentIntentId: string) {\n    try {\n        const updatedInvoice = await apiFetch(`/invoices/${invoiceId}/confirm-payment`, {\n            method: 'POST',\n            body: JSON.stringify({ paymentIntentId }),\n        });\n        revalidatePath(`/dashboard/invoices/${invoiceId}`);\n        revalidatePath('/dashboard/invoices');\n        revalidatePath('/dashboard/payments');\n        return { success: true, message: 'Payment confirmed successfully!', data: updatedInvoice };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to confirm payment.' };\n    }\n}\n\nexport async function createCheckoutSessionAction(priceId: string) {\n    try {\n        const result = await apiFetch('/subscriptions/create-checkout-session', {\n            method: 'POST',\n            body: JSON.stringify({ priceId }),\n        });\n        if (result.url) {\n            redirect(result.url);\n        } else {\n            return { success: false, error: 'Could not create checkout session.' };\n        }\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to create checkout session.' };\n    }\n}\n\nexport async function createPortalSessionAction() {\n    try {\n        const result = await apiFetch('/subscriptions/create-portal-session', {\n            method: 'POST'\n        });\n        if (result.url) {\n            redirect(result.url);\n        } else {\n            return { success: false, error: 'Could not create portal session.' };\n        }\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to create portal session.' };\n    }\n}\n\n\n// --- AI Actions ---\n\nasync function checkAiUsageLimit() {\n    const userResult = await getUserAction();\n    if (!userResult.success) {\n        throw new Error('Could not identify user. Please log in again.');\n    }\n    const user = userResult.data;\n    const limits = planLimits[user.plan as keyof typeof planLimits] || planLimits.free;\n\n    if (user.aiRequestCount >= limits.aiRequests) {\n        throw new Error(`You have reached your monthly limit of ${limits.aiRequests} AI requests. Please upgrade your plan.`);\n    }\n}\n\nasync function incrementAiUsage() {\n    try {\n        await apiFetch('/users/me/increment-ai', { method: 'PUT' });\n        revalidatePath('/dashboard/settings');\n    } catch (error) {\n        console.error(\"Failed to increment AI usage count:\", error);\n        // We don't throw here to not fail the main operation, but we log the error.\n    }\n}\n\nexport async function getFinancialInsightsAction() {\n  try {\n    await checkAiUsageLimit();\n\n    const [invoicesResult, paymentsResult] = await Promise.all([\n      getInvoicesAction(),\n      getPaymentsAction(),\n    ]);\n\n    if (!invoicesResult.success || !paymentsResult.success) {\n      throw new Error('Failed to fetch financial data for analysis.');\n    }\n\n    const insights = await generateFinancialInsights({\n      invoiceData: JSON.stringify(invoicesResult.data),\n      paymentData: JSON.stringify(paymentsResult.data),\n    });\n\n    await incrementAiUsage();\n    return { success: true, data: insights };\n  } catch (error) {\n    console.error('Error generating financial insights:', error);\n    const message = error instanceof Error ? error.message : 'Failed to generate financial insights.';\n    return { success: false, error: message };\n  }\n}\n\nexport async function generateInvoiceFromTextAction(text: string) {\n  try {\n    await checkAiUsageLimit();\n    const result = await generateInvoiceFromText(text);\n    await incrementAiUsage();\n    return { success: true, data: result };\n  } catch (error) {\n    console.error('Error generating invoice from text:', error);\n    const message = error instanceof Error ? error.message : 'Failed to generate invoice from text.';\n    return { success: false, error: message };\n  }\n}\n\nexport async function calculateTaxAction(address: string, subtotal: number) {\n  try {\n    await checkAiUsageLimit();\n    const result = await calculateTax({ address, subtotal });\n    await incrementAiUsage();\n    return { success: true, data: result };\n  } catch (error) {\n    console.error('Error calculating tax:', error);\n    const message = error instanceof Error ? error.message : 'Failed to calculate tax with AI.';\n    return { success: false, error: message };\n  }\n}\n"],"names":[],"mappings":";;;;;;IAgJsB,sBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 824, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["'use server'\n\nimport { z } from 'zod'\nimport { generateFinancialInsights } from '@/ai/flows/generate-financial-insights'\nimport { generateInvoiceFromText } from '@/ai/flows/generate-invoice-from-text'\nimport { calculateTax } from '@/ai/flows/calculate-tax'\nimport { invoiceSchema, clientSchema } from '@/lib/types'\nimport { planLimits } from '@/lib/subscriptions';\nimport { cookies } from 'next/headers'\nimport { redirect } from 'next/navigation'\nimport { revalidatePath } from 'next/cache'\n\nconst API_BASE_URL = process.env.API_BASE_URL || 'http://localhost:8080/api';\n\nconst loginSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(1, 'Password is required')\n})\n\n// --- Helper function for API calls ---\nasync function apiFetch(url: string, options: RequestInit = {}) {\n  const sessionToken = cookies().get('session')?.value;\n  try {\n    const res = await fetch(`${API_BASE_URL}${url}`, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        ...(sessionToken && { 'Authorization': `Bearer ${sessionToken}` }),\n        ...options.headers,\n      },\n    });\n\n    if (!res.ok) {\n      const errorBody = await res.json().catch(() => ({ message: `Request failed with status ${res.status}` }));\n      // For 403 Forbidden, we want to show a specific message from the API\n      if (res.status === 403) {\n          throw new Error(errorBody.message || 'You do not have permission to perform this action. Please upgrade your plan.');\n      }\n      throw new Error(errorBody.message || 'An API error occurred');\n    }\n\n    if (res.status === 204) { // No Content\n        return null;\n    }\n\n    return await res.json();\n  } catch (error) {\n    console.error(`API Error fetching ${url}:`, error);\n    const message = error instanceof Error ? error.message : 'An unknown network error occurred';\n    throw new Error(message);\n  }\n}\n\n\nexport async function loginAction(data: z.infer<typeof loginSchema>) {\n  const parsedData = loginSchema.safeParse(data);\n  if (!parsedData.success) {\n      return { success: false, error: \"Invalid data provided.\"}\n  }\n\n  const { email, password } = parsedData.data;\n\n  // Mock authentication logic - in a real app, this would call a /login API endpoint\n  // that validates hashed passwords.\n  if (email === 'user@example.com' && password === 'password') {\n    // For this demo, we use the user's email as their session \"token\".\n    // This allows the backend to identify the user for each request.\n    cookies().set('session', email, {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      path: '/',\n      // Removed maxAge to make it a session cookie\n    })\n    return { success: true }\n  } else {\n    return { success: false, error: 'Invalid credentials.' }\n  }\n}\n\nexport async function logoutAction() {\n  cookies().delete('session')\n  redirect('/login')\n}\n\n// --- User Actions ---\nexport async function getUserAction() {\n  try {\n    const user = await apiFetch('/users/me');\n    return { success: true, data: user };\n  } catch (error) {\n    return { success: false, error: 'User not found.' };\n  }\n}\n\n\n// --- Invoice Actions ---\n\nexport async function getInvoicesAction(params?: { clientId?: string }) {\n  try {\n    const url = params?.clientId ? `/invoices?clientId=${params.clientId}` : '/invoices';\n    const invoices = await apiFetch(url);\n    return { success: true, data: invoices };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch invoices.' };\n  }\n}\n\nexport async function createInvoiceAction(data: z.infer<typeof invoiceSchema>) {\n  const parsedData = invoiceSchema.safeParse(data);\n  if (!parsedData.success) {\n    return { success: false, error: 'Invalid data provided.' };\n  }\n  \n  try {\n    const subtotal = parsedData.data.lineItems.reduce((sum, item) => sum + item.quantity * item.rate, 0);\n    const tax = parsedData.data.tax || 0;\n    const total = subtotal + tax;\n\n    const newInvoiceData = { ...parsedData.data, subtotal, tax, total };\n    \n    // The backend will now check the user's plan and invoice count before creating.\n    await apiFetch('/invoices', {\n      method: 'POST',\n      body: JSON.stringify(newInvoiceData),\n    });\n    \n    revalidatePath('/dashboard/invoices');\n    revalidatePath('/dashboard/payments');\n    revalidatePath('/dashboard/settings'); // To update usage display\n    return { success: true, message: 'Invoice created successfully!' };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to create invoice.' };\n  }\n}\n\nexport async function getInvoiceByIdAction(id: string) {\n  try {\n    const invoice = await apiFetch(`/invoices/${id}`);\n    return { success: true, data: invoice };\n  } catch (error) {\n    return { success: false, error: 'Invoice not found.' };\n  }\n}\n\nexport async function updateInvoiceAction(id: string, data: z.infer<typeof invoiceSchema>) {\n  const parsedData = invoiceSchema.safeParse(data);\n  if (!parsedData.success) {\n    return { success: false, error: 'Invalid data provided.' };\n  }\n\n  try {\n    const subtotal = parsedData.data.lineItems.reduce((sum, item) => sum + item.quantity * item.rate, 0);\n    const tax = parsedData.data.tax || 0;\n    const total = subtotal + tax;\n\n    const updatedInvoiceData = { ...parsedData.data, subtotal, tax, total };\n\n    await apiFetch(`/invoices/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify(updatedInvoiceData),\n    });\n\n    revalidatePath('/dashboard/invoices');\n    revalidatePath(`/dashboard/invoices/${id}`);\n    revalidatePath(`/dashboard/invoices/${id}/edit`);\n    revalidatePath('/dashboard/payments');\n    return { success: true, message: `Invoice ${data.invoiceNumber} updated successfully!` };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to update invoice.' };\n  }\n}\n\nexport async function deleteInvoiceAction(id: string) {\n  try {\n    await apiFetch(`/invoices/${id}`, { method: 'DELETE' });\n    revalidatePath('/dashboard/invoices');\n    revalidatePath('/dashboard/payments');\n    return { success: true, message: 'Invoice deleted successfully!' };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to delete invoice.' };\n  }\n}\n\nexport async function updateInvoiceStatusAction(id: string, status: 'paid' | 'pending' | 'overdue') {\n  try {\n    await apiFetch(`/invoices/${id}/status`, {\n      method: 'PUT',\n      body: JSON.stringify({ status }),\n    });\n    revalidatePath('/dashboard/invoices');\n    revalidatePath(`/dashboard/invoices/${id}`);\n    revalidatePath('/dashboard'); // For the stats cards\n    revalidatePath('/dashboard/payments');\n    return { success: true, message: `Invoice status updated to ${status}.` };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to update invoice status.' };\n  }\n}\n\nexport async function sendInvoiceReminderAction(invoiceId: string) {\n  try {\n    const result = await apiFetch(`/invoices/${invoiceId}/remind`, { method: 'POST' });\n    return { success: true, message: result.message || 'Reminder sent successfully!' };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to send reminder.' };\n  }\n}\n\n// --- Client Actions ---\n\nexport async function getClientsAction() {\n    try {\n        const clients = await apiFetch('/clients');\n        return { success: true, data: clients };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch clients.' };\n    }\n}\n\nexport async function getClientByIdAction(id: string) {\n    try {\n        const client = await apiFetch(`/clients/${id}`);\n        return { success: true, data: client };\n    } catch (error) {\n        return { success: false, error: 'Client not found.' };\n    }\n}\n\nexport async function createClientAction(data: z.infer<typeof clientSchema>) {\n    const parsedData = clientSchema.safeParse(data);\n    if (!parsedData.success) {\n        return { success: false, error: \"Invalid data provided.\"}\n    }\n    try {\n        await apiFetch('/clients', {\n            method: 'POST',\n            body: JSON.stringify(parsedData.data),\n        });\n        revalidatePath('/dashboard/clients');\n        return { success: true, message: 'Client created successfully!' };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to create client.' };\n    }\n}\n\nexport async function updateClientAction(id: string, data: z.infer<typeof clientSchema>) {\n    const parsedData = clientSchema.safeParse(data);\n    if (!parsedData.success) {\n        return { success: false, error: 'Invalid data provided.'}\n    }\n    try {\n        await apiFetch(`/clients/${id}`, {\n            method: 'PUT',\n            body: JSON.stringify(parsedData.data),\n        });\n        revalidatePath('/dashboard/clients');\n        revalidatePath(`/dashboard/clients/${id}`);\n        revalidatePath(`/dashboard/clients/${id}/edit`);\n        return { success: true, message: `Client ${data.name} updated successfully!` };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to update client.' };\n    }\n}\n\nexport async function deleteClientAction(id: string) {\n    try {\n        await apiFetch(`/clients/${id}`, { method: 'DELETE' });\n        revalidatePath('/dashboard/clients');\n        return { success: true, message: 'Client deleted successfully!' };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to delete client.' };\n    }\n}\n\nconst noteFormSchema = z.object({\n  content: z.string().min(1, 'Note content cannot be empty.'),\n});\n\nexport async function addClientNoteAction(clientId: string, data: z.infer<typeof noteFormSchema>) {\n  const parsedData = noteFormSchema.safeParse(data);\n  if (!parsedData.success) {\n    return { success: false, error: 'Invalid data provided.' };\n  }\n  try {\n    const updatedClient = await apiFetch(`/clients/${clientId}/notes`, {\n      method: 'POST',\n      body: JSON.stringify(parsedData.data),\n    });\n    revalidatePath(`/dashboard/clients/${clientId}`);\n    return { success: true, message: 'Note added successfully!', data: updatedClient };\n  } catch (error) {\n    return { success: false, error: error instanceof Error ? error.message : 'Failed to add note.' };\n  }\n}\n\n// --- Payment Actions ---\n\nexport async function getPaymentsAction() {\n    try {\n        const payments = await apiFetch('/payments');\n        return { success: true, data: payments };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to fetch payments.' };\n    }\n}\n\n// --- Stripe / Subscription Actions ---\nexport async function createPaymentIntentAction(amount: number, currency: string) {\n    try {\n        const result = await apiFetch('/stripe/create-payment-intent', {\n            method: 'POST',\n            body: JSON.stringify({ amount, currency }),\n        });\n        return { success: true, clientSecret: result.clientSecret };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to create payment intent.' };\n    }\n}\n\nexport async function confirmStripePaymentAction(invoiceId: string, paymentIntentId: string) {\n    try {\n        const updatedInvoice = await apiFetch(`/invoices/${invoiceId}/confirm-payment`, {\n            method: 'POST',\n            body: JSON.stringify({ paymentIntentId }),\n        });\n        revalidatePath(`/dashboard/invoices/${invoiceId}`);\n        revalidatePath('/dashboard/invoices');\n        revalidatePath('/dashboard/payments');\n        return { success: true, message: 'Payment confirmed successfully!', data: updatedInvoice };\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to confirm payment.' };\n    }\n}\n\nexport async function createCheckoutSessionAction(priceId: string) {\n    try {\n        const result = await apiFetch('/subscriptions/create-checkout-session', {\n            method: 'POST',\n            body: JSON.stringify({ priceId }),\n        });\n        if (result.url) {\n            redirect(result.url);\n        } else {\n            return { success: false, error: 'Could not create checkout session.' };\n        }\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to create checkout session.' };\n    }\n}\n\nexport async function createPortalSessionAction() {\n    try {\n        const result = await apiFetch('/subscriptions/create-portal-session', {\n            method: 'POST'\n        });\n        if (result.url) {\n            redirect(result.url);\n        } else {\n            return { success: false, error: 'Could not create portal session.' };\n        }\n    } catch (error) {\n        return { success: false, error: error instanceof Error ? error.message : 'Failed to create portal session.' };\n    }\n}\n\n\n// --- AI Actions ---\n\nasync function checkAiUsageLimit() {\n    const userResult = await getUserAction();\n    if (!userResult.success) {\n        throw new Error('Could not identify user. Please log in again.');\n    }\n    const user = userResult.data;\n    const limits = planLimits[user.plan as keyof typeof planLimits] || planLimits.free;\n\n    if (user.aiRequestCount >= limits.aiRequests) {\n        throw new Error(`You have reached your monthly limit of ${limits.aiRequests} AI requests. Please upgrade your plan.`);\n    }\n}\n\nasync function incrementAiUsage() {\n    try {\n        await apiFetch('/users/me/increment-ai', { method: 'PUT' });\n        revalidatePath('/dashboard/settings');\n    } catch (error) {\n        console.error(\"Failed to increment AI usage count:\", error);\n        // We don't throw here to not fail the main operation, but we log the error.\n    }\n}\n\nexport async function getFinancialInsightsAction() {\n  try {\n    await checkAiUsageLimit();\n\n    const [invoicesResult, paymentsResult] = await Promise.all([\n      getInvoicesAction(),\n      getPaymentsAction(),\n    ]);\n\n    if (!invoicesResult.success || !paymentsResult.success) {\n      throw new Error('Failed to fetch financial data for analysis.');\n    }\n\n    const insights = await generateFinancialInsights({\n      invoiceData: JSON.stringify(invoicesResult.data),\n      paymentData: JSON.stringify(paymentsResult.data),\n    });\n\n    await incrementAiUsage();\n    return { success: true, data: insights };\n  } catch (error) {\n    console.error('Error generating financial insights:', error);\n    const message = error instanceof Error ? error.message : 'Failed to generate financial insights.';\n    return { success: false, error: message };\n  }\n}\n\nexport async function generateInvoiceFromTextAction(text: string) {\n  try {\n    await checkAiUsageLimit();\n    const result = await generateInvoiceFromText(text);\n    await incrementAiUsage();\n    return { success: true, data: result };\n  } catch (error) {\n    console.error('Error generating invoice from text:', error);\n    const message = error instanceof Error ? error.message : 'Failed to generate invoice from text.';\n    return { success: false, error: message };\n  }\n}\n\nexport async function calculateTaxAction(address: string, subtotal: number) {\n  try {\n    await checkAiUsageLimit();\n    const result = await calculateTax({ address, subtotal });\n    await incrementAiUsage();\n    return { success: true, data: result };\n  } catch (error) {\n    console.error('Error calculating tax:', error);\n    const message = error instanceof Error ? error.message : 'Failed to calculate tax with AI.';\n    return { success: false, error: message };\n  }\n}\n"],"names":[],"mappings":";;;;;;IA+asB,qBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 837, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/types.ts"],"sourcesContent":["import { z } from 'zod';\n\nexport const clientSchema = z.object({\n  name: z.string().min(1, 'Client name is required'),\n  email: z.string().email('Invalid email address'),\n  address: z.string().min(1, 'Client address is required'),\n});\n\nconst noteSchema = z.object({\n  content: z.string(),\n  date: z.string(), // from API it's a string\n  _id: z.string().optional(),\n});\n\nexport const lineItemSchema = z.object({\n  description: z.string().min(1, 'Description is required'),\n  quantity: z.number().min(0.01, 'Quantity must be positive'),\n  rate: z.number().min(0, 'Rate must be non-negative'),\n});\n\nexport const invoiceSchema = z.object({\n  id: z.string().optional(),\n  invoiceNumber: z.string().min(1, 'Invoice number is required'),\n  client: clientSchema,\n  invoiceDate: z.date(),\n  dueDate: z.date(),\n  lineItems: z.array(lineItemSchema).min(1, 'At least one line item is required'),\n  subtotal: z.number().optional(), // Calculated on submit\n  tax: z.number().optional().default(0),\n  taxRate: z.number().optional().default(0),\n  total: z.number().optional(), // Calculated on submit\n  currency: z.enum(['USD', 'EUR', 'GBP']),\n  status: z.enum(['paid', 'pending', 'overdue']),\n  signature: z.string(),\n  notes: z.string().optional(),\n});\n\nexport type Client = z.infer<typeof clientSchema>;\nexport type Note = z.infer<typeof noteSchema>;\nexport type ClientWithId = Client & { id: string; notes?: Note[] };\nexport type LineItem = z.infer<typeof lineItemSchema>;\nexport type Invoice = z.infer<typeof invoiceSchema> & { \n  id: string, \n  subtotal: number,\n  tax: number,\n  taxRate: number,\n  total: number \n};\n\nconst invoiceForPaymentSchema = z.object({\n    id: z.string(),\n    invoiceNumber: z.string(),\n    client: clientSchema.pick({ name: true })\n});\n\nexport const paymentSchema = z.object({\n    id: z.string(),\n    invoiceId: invoiceForPaymentSchema,\n    amount: z.number(),\n    date: z.string(), // Comes as a string from API\n    method: z.string(),\n});\n\nexport type Payment = z.infer<typeof paymentSchema>;\n\nexport const aiGeneratedInvoiceSchema = z.object({\n    client: clientSchema,\n    lineItems: z.array(lineItemSchema)\n});\nexport type AIGeneratedInvoiceData = z.infer<typeof aiGeneratedInvoiceSchema>;\n"],"names":[],"mappings":";;;;;;;AAAA;;AAEO,MAAM,eAAe,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACnC,MAAM,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,SAAS,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC7B;AAEA,MAAM,aAAa,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC1B,SAAS,oIAAA,CAAA,IAAC,CAAC,MAAM;IACjB,MAAM,oIAAA,CAAA,IAAC,CAAC,MAAM;IACd,KAAK,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;AAC1B;AAEO,MAAM,iBAAiB,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACrC,aAAa,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC/B,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM;IAC/B,MAAM,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC1B;AAEO,MAAM,gBAAgB,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACpC,IAAI,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IACvB,eAAe,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACjC,QAAQ;IACR,aAAa,oIAAA,CAAA,IAAC,CAAC,IAAI;IACnB,SAAS,oIAAA,CAAA,IAAC,CAAC,IAAI;IACf,WAAW,oIAAA,CAAA,IAAC,CAAC,KAAK,CAAC,gBAAgB,GAAG,CAAC,GAAG;IAC1C,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAC7B,KAAK,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,OAAO,CAAC;IACnC,SAAS,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,OAAO,CAAC;IACvC,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAC1B,UAAU,oIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAO;QAAO;KAAM;IACtC,QAAQ,oIAAA,CAAA,IAAC,CAAC,IAAI,CAAC;QAAC;QAAQ;QAAW;KAAU;IAC7C,WAAW,oIAAA,CAAA,IAAC,CAAC,MAAM;IACnB,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;AAC5B;AAcA,MAAM,0BAA0B,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACrC,IAAI,oIAAA,CAAA,IAAC,CAAC,MAAM;IACZ,eAAe,oIAAA,CAAA,IAAC,CAAC,MAAM;IACvB,QAAQ,aAAa,IAAI,CAAC;QAAE,MAAM;IAAK;AAC3C;AAEO,MAAM,gBAAgB,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAClC,IAAI,oIAAA,CAAA,IAAC,CAAC,MAAM;IACZ,WAAW;IACX,QAAQ,oIAAA,CAAA,IAAC,CAAC,MAAM;IAChB,MAAM,oIAAA,CAAA,IAAC,CAAC,MAAM;IACd,QAAQ,oIAAA,CAAA,IAAC,CAAC,MAAM;AACpB;AAIO,MAAM,2BAA2B,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC7C,QAAQ;IACR,WAAW,oIAAA,CAAA,IAAC,CAAC,KAAK,CAAC;AACvB","debugId":null}},
    {"offset": {"line": 909, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/invoices/invoice-form.tsx"],"sourcesContent":["'use client';\n\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { useFieldArray, useForm } from 'react-hook-form';\nimport * as z from 'zod';\nimport { CalendarIcon, Trash, PlusCircle, DollarSign, Euro, PoundSterling, WandSparkles, Loader2 } from 'lucide-react';\nimport { format } from 'date-fns';\nimport { useRouter } from 'next/navigation';\nimport { useMemo, useState } from 'react';\n\nimport { cn } from '@/lib/utils';\nimport { Button } from '@/components/ui/button';\nimport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Calendar } from '@/components/ui/calendar';\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@/components/ui/popover';\nimport { Textarea } from '@/components/ui/textarea';\nimport SignaturePad from '@/components/invoices/signature-pad';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Separator } from '@/components/ui/separator';\nimport { useToast } from '@/hooks/use-toast';\nimport { createInvoiceAction, updateInvoiceAction, calculateTaxAction } from '@/app/actions';\nimport { invoiceSchema, type Invoice, type AIGeneratedInvoiceData } from '@/lib/types';\n\ntype InvoiceFormValues = z.infer<typeof invoiceSchema>;\n\ninterface InvoiceFormProps {\n  invoiceToEdit?: Invoice;\n  aiGeneratedData?: AIGeneratedInvoiceData;\n}\n\nexport default function InvoiceForm({ invoiceToEdit, aiGeneratedData }: InvoiceFormProps) {\n  const { toast } = useToast();\n  const router = useRouter();\n  const isEditMode = !!invoiceToEdit;\n  const isAiMode = !!aiGeneratedData;\n  const [isCalculatingTax, setIsCalculatingTax] = useState(false);\n\n  const form = useForm<InvoiceFormValues>({\n    resolver: zodResolver(invoiceSchema),\n    defaultValues: isEditMode\n      ? {\n          ...invoiceToEdit,\n          invoiceDate: new Date(invoiceToEdit.invoiceDate),\n          dueDate: new Date(invoiceToEdit.dueDate),\n        }\n      : isAiMode\n      ? {\n          ...aiGeneratedData,\n          invoiceNumber: `INV-${Date.now().toString().slice(-6)}`,\n          invoiceDate: new Date(),\n          dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // 30 days from now\n          currency: 'USD',\n          status: 'pending',\n          notes: 'Thank you for your business.',\n          signature: '',\n          tax: 0,\n          taxRate: 0,\n      }\n      : {\n          client: { name: '', email: '', address: '' },\n          invoiceNumber: `INV-${Date.now().toString().slice(-6)}`,\n          invoiceDate: new Date(),\n          dueDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // 30 days from now\n          lineItems: [{ description: '', quantity: 1, rate: 0 }],\n          currency: 'USD',\n          notes: 'Thank you for your business.',\n          signature: '',\n          status: 'pending',\n          tax: 0,\n          taxRate: 0,\n        },\n  });\n\n  const { fields, append, remove } = useFieldArray({\n    control: form.control,\n    name: 'lineItems',\n  });\n\n  const watchLineItems = form.watch('lineItems');\n  const watchTax = form.watch('tax');\n\n  const subtotal = useMemo(() => {\n    return watchLineItems.reduce(\n      (sum, item) => sum + (item.quantity || 0) * (item.rate || 0),\n      0\n    );\n  }, [watchLineItems]);\n\n  const total = useMemo(() => {\n    return subtotal + (watchTax || 0);\n  }, [subtotal, watchTax]);\n\n\n  async function handleCalculateTax() {\n    const clientAddress = form.getValues('client.address');\n    if (!clientAddress) {\n        toast({\n            variant: 'destructive',\n            title: 'Client Address Required',\n            description: 'Please enter a client address to calculate tax.'\n        });\n        return;\n    }\n    \n    setIsCalculatingTax(true);\n    const result = await calculateTaxAction(clientAddress, subtotal);\n    setIsCalculatingTax(false);\n\n    if (result.success && result.data) {\n        form.setValue('tax', result.data.taxAmount, { shouldValidate: true });\n        form.setValue('taxRate', result.data.taxRate, { shouldValidate: true });\n        toast({\n            title: 'Tax Calculated',\n            description: `Applied a tax rate of ${result.data.taxRate.toFixed(2)}%`\n        });\n    } else {\n        toast({\n            variant: 'destructive',\n            title: 'Tax Calculation Failed',\n            description: result.error\n        });\n    }\n  }\n\n  async function onSubmit(data: InvoiceFormValues) {\n    const formData = { ...data, subtotal, total };\n\n    let result;\n    if (isEditMode) {\n        result = await updateInvoiceAction(invoiceToEdit.id, formData);\n    } else {\n        result = await createInvoiceAction(formData);\n    }\n    \n    if (result.success) {\n      toast({\n        title: 'Success!',\n        description: result.message,\n      });\n      if (isEditMode) {\n        router.push(`/dashboard/invoices/${invoiceToEdit.id}`);\n      } else {\n        form.reset();\n        router.push('/dashboard/invoices');\n      }\n    } else {\n      toast({\n        variant: 'destructive',\n        title: 'Error',\n        description: result.error,\n      });\n    }\n  }\n\n  return (\n    <Form {...form}>\n      <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          <div className=\"lg:col-span-2 space-y-8\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"font-headline\">Client Information</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"client.name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Client Name</FormLabel>\n                      <FormControl>\n                        <Input placeholder=\"John Doe\" {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"client.email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Client Email</FormLabel>\n                      <FormControl>\n                        <Input placeholder=\"client@example.com\" {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"client.address\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Client Address</FormLabel>\n                      <FormControl>\n                        <Textarea placeholder=\"123 Main St, Anytown, USA\" {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"font-headline\">Invoice Items</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {fields.map((field, index) => (\n                    <div key={field.id} className=\"flex flex-col md:flex-row gap-4 items-start\">\n                      <FormField\n                        control={form.control}\n                        name={`lineItems.${index}.description`}\n                        render={({ field }) => (\n                          <FormItem className=\"flex-grow\">\n                            <FormLabel className={cn(index !== 0 && \"sr-only\")}>Description</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"Service or product description\" {...field} />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                       <div className=\"flex gap-4\">\n                        <FormField\n                            control={form.control}\n                            name={`lineItems.${index}.quantity`}\n                            render={({ field }) => (\n                            <FormItem className=\"w-24\">\n                                <FormLabel className={cn(index !== 0 && \"sr-only\")}>Qty</FormLabel>\n                                <FormControl>\n                                <Input type=\"number\" placeholder=\"1\" {...field} onChange={e => field.onChange(parseFloat(e.target.value) || 0)} />\n                                </FormControl>\n                                <FormMessage />\n                            </FormItem>\n                            )}\n                        />\n                        <FormField\n                            control={form.control}\n                            name={`lineItems.${index}.rate`}\n                            render={({ field }) => (\n                            <FormItem className=\"w-32\">\n                                <FormLabel className={cn(index !== 0 && \"sr-only\")}>Rate</FormLabel>\n                                <FormControl>\n                                <Input type=\"number\" placeholder=\"100.00\" {...field} onChange={e => field.onChange(parseFloat(e.target.value) || 0)} />\n                                </FormControl>\n                                <FormMessage />\n                            </FormItem>\n                            )}\n                        />\n                       </div>\n                      <Button\n                        type=\"button\"\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        onClick={() => remove(index)}\n                        className=\"mt-0 md:mt-8 text-muted-foreground hover:text-destructive\"\n                      >\n                        <Trash className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  ))}\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => append({ description: '', quantity: 1, rate: 0 })}\n                  >\n                    <PlusCircle className=\"mr-2 h-4 w-4\" />\n                    Add Item\n                  </Button>\n                </div>\n                <Separator className=\"my-6\" />\n                <div className=\"flex justify-between items-start\">\n                  <Button type=\"button\" variant=\"outline\" onClick={handleCalculateTax} disabled={isCalculatingTax}>\n                    {isCalculatingTax ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\"/> : <WandSparkles className=\"mr-2 h-4 w-4\" />}\n                    {isCalculatingTax ? 'Calculating...' : 'Calculate Tax with AI'}\n                  </Button>\n                  <div className=\"text-right space-y-2 w-full max-w-xs\">\n                    <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Subtotal</span>\n                        <span>${subtotal.toFixed(2)}</span>\n                    </div>\n                     <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Tax</span>\n                         <FormField\n                            control={form.control}\n                            name=\"tax\"\n                            render={({ field }) => (\n                                <FormItem className=\"flex items-center gap-2\">\n                                    <span className=\"text-muted-foreground\">$</span>\n                                    <FormControl>\n                                        <Input\n                                            type=\"number\"\n                                            className=\"h-7 w-24 text-right\"\n                                            {...field}\n                                            onChange={e => field.onChange(parseFloat(e.target.value) || 0)}\n                                            />\n                                    </FormControl>\n                                </FormItem>\n                            )}\n                            />\n                    </div>\n                    <Separator />\n                    <div className=\"flex justify-between font-bold text-lg\">\n                        <span>Total</span>\n                        <span>${total.toFixed(2)}</span>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          <div className=\"space-y-8\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"font-headline\">Invoice Details</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"invoiceNumber\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Invoice Number</FormLabel>\n                      <FormControl>\n                        <Input {...field} />\n                      </FormControl>\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"currency\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Currency</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select a currency\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"USD\"><DollarSign className=\"inline-block h-4 w-4 mr-2\" /> USD</SelectItem>\n                          <SelectItem value=\"EUR\"><Euro className=\"inline-block h-4 w-4 mr-2\" /> EUR</SelectItem>\n                          <SelectItem value=\"GBP\"><PoundSterling className=\"inline-block h-4 w-4 mr-2\" /> GBP</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"invoiceDate\"\n                  render={({ field }) => (\n                    <FormItem className=\"flex flex-col\">\n                      <FormLabel>Invoice Date</FormLabel>\n                      <Popover>\n                        <PopoverTrigger asChild>\n                          <FormControl>\n                            <Button\n                              variant={'outline'}\n                              className={cn(\n                                'w-full pl-3 text-left font-normal',\n                                !field.value && 'text-muted-foreground'\n                              )}\n                            >\n                              {field.value ? (\n                                format(field.value, 'PPP')\n                              ) : (\n                                <span>Pick a date</span>\n                              )}\n                              <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\n                            </Button>\n                          </FormControl>\n                        </PopoverTrigger>\n                        <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                          <Calendar\n                            mode=\"single\"\n                            selected={field.value}\n                            onSelect={field.onChange}\n                            initialFocus\n                          />\n                        </PopoverContent>\n                      </Popover>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"dueDate\"\n                  render={({ field }) => (\n                    <FormItem className=\"flex flex-col\">\n                      <FormLabel>Due Date</FormLabel>\n                      <Popover>\n                        <PopoverTrigger asChild>\n                          <FormControl>\n                            <Button\n                              variant={'outline'}\n                              className={cn(\n                                'w-full pl-3 text-left font-normal',\n                                !field.value && 'text-muted-foreground'\n                              )}\n                            >\n                              {field.value ? (\n                                format(field.value, 'PPP')\n                              ) : (\n                                <span>Pick a date</span>\n                              )}\n                              <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\n                            </Button>\n                          </FormControl>\n                        </PopoverTrigger>\n                        <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                          <Calendar\n                            mode=\"single\"\n                            selected={field.value}\n                            onSelect={field.onChange}\n                            initialFocus\n                          />\n                        </PopoverContent>\n                      </Popover>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"font-headline\">Signature</CardTitle>\n                <FormDescription>Sign below to authorize this invoice.</FormDescription>\n              </CardHeader>\n              <CardContent>\n                <FormField\n                  control={form.control}\n                  name=\"signature\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormControl>\n                        <SignaturePad onSave={field.onChange} initialDataUrl={field.value} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"font-headline\">Notes</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <FormField\n              control={form.control}\n              name=\"notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormControl>\n                    <Textarea placeholder=\"Add any additional terms or notes...\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n          </CardContent>\n        </Card>\n\n        <div className=\"flex justify-end gap-4\">\n          <Button type=\"button\" variant=\"outline\" onClick={() => router.back()}>Cancel</Button>\n          <Button type=\"submit\" size=\"lg\" disabled={form.formState.isSubmitting}>\n            {form.formState.isSubmitting \n              ? (isEditMode ? 'Saving...' : 'Creating...') \n              : (isEditMode ? 'Save Changes' : 'Create Invoice')}\n          </Button>\n        </div>\n      </form>\n    </Form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2231, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/dashboard/invoices/new/page.tsx"],"sourcesContent":["'use client';\n\nimport InvoiceForm from '@/components/invoices/invoice-form';\nimport { useSearchParams } from 'next/navigation';\nimport type { AIGeneratedInvoiceData } from '@/lib/types';\nimport { Suspense } from 'react';\n\nfunction NewInvoicePageContent() {\n  const searchParams = useSearchParams();\n  const aiDataString = searchParams.get('data');\n  let aiData: AIGeneratedInvoiceData | undefined = undefined;\n\n  if (aiDataString) {\n    try {\n      // The data is encoded twice, once by the browser and once manually\n      aiData = JSON.parse(aiDataString);\n    } catch (e) {\n      console.error(\"Failed to parse AI data from URL\", e);\n    }\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      <h1 className=\"text-3xl font-headline font-bold tracking-tight\">Create New Invoice</h1>\n      <InvoiceForm aiGeneratedData={aiData} />\n    </div>\n  );\n}\n\n\nexport default function NewInvoicePage() {\n  // Wrap with Suspense because useSearchParams() needs it.\n  return (\n    <Suspense fallback={<div>Loading...</div>}>\n      <NewInvoicePageContent />\n    </Suspense>\n  )\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,SAAS;IACP,MAAM,eAAe,CAAA,GAAA,kIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,eAAe,aAAa,GAAG,CAAC;IACtC,IAAI,SAA6C;IAEjD,IAAI,cAAc;QAChB,IAAI;YACF,mEAAmE;YACnE,SAAS,KAAK,KAAK,CAAC;QACtB,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,oCAAoC;QACpD;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAkD;;;;;;0BAChE,8OAAC,iJAAA,CAAA,UAAW;gBAAC,iBAAiB;;;;;;;;;;;;AAGpC;AAGe,SAAS;IACtB,yDAAyD;IACzD,qBACE,8OAAC,qMAAA,CAAA,WAAQ;QAAC,wBAAU,8OAAC;sBAAI;;;;;;kBACvB,cAAA,8OAAC;;;;;;;;;;AAGP","debugId":null}}]
}